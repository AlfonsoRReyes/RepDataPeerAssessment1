---
title: "Reproducible Research, Assignment 1"
author: "Alfonso R. Reyes"
date: "`r Sys.Date()`"
# output: 
#   html_document:
#     keep_md: true
output: 
  rmarkdown::html_vignette:
    fig_caption: yes
    keep_md: true

vignette: >
  %\VignetteIndexEntry{Reproducible Research, Assignment 1}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE, error=TRUE, message=FALSE}
knitr::opts_chunk$set(echo = TRUE, comment = NA, error = TRUE)
```


## Loading and preprocessing the data
We start by downloading the raw data using the link provided by the instructor. We use a function that will download the zip file, unpack it and place it in an indicated directory. The function is called `downloadZip`.


### Downloading and unpacking raw data file

```{r}
downloadZip <- function(fileUrl, outDir="./data") {
  temp <- tempfile()
  download.file(fileUrl, temp, mode = "wb")
  unzip(temp, exdir = outDir)
}
```


```{r}
fileUrl <- "https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2Factivity.zip"
outDir <- "../inst/extdata"             # folder for raw data
downloadZip(fileUrl, outDir = outDir)   # download and unpack zip file
```


### Create the RData file
More RData file may be generated during this assignment. They will be placed under the folder `data`.

```{r}
# get the base folder and raw data folder
baseLoc <- system.file(package="RepDataPeerAssessment1")
extPath <- file.path(baseLoc, "extdata")
baseLoc
extPath
```

```{r}
# save the 
activity <- read.csv(paste(extPath, "activity.csv", sep = "/"))
save(activity, file="../data/activity.RData")

```


```{r}
# this will work after at least a data file has been saved to this folder
system.file(file="data", package="RepDataPeerAssessment1")
```

### Basic sanity check

* Show first 6 rows of data frame
* Show dimensions of the data frame
* Show variable names
* Show summary

```{r message=FALSE}
library(RepDataPeerAssessment1)
data("activity")
head(activity)
```


```{r}
dim(activity)
```

```{r}
names(activity)
```

```{r}
summary(activity)
```


## What is mean total number of steps taken per day?
We will ignore the NAs in this part of the assignment. 

```{r}
complete <- complete.cases(activity)
activity.cases <- activity[complete, ]
```


### Histogram of total number of steps each day

```{r}
hist(activity.cases$steps, breaks = 60)
```
```{r}
hist(activity.cases$steps, breaks = 30)
```


### Find the **mean** and the **median** total number of steps per day

```{r}
mean(activity.cases$steps)
```

```{r}
median(activity.cases$steps)
```


## What is the average daily activity pattern?



## Imputing missing values



## Are there differences in activity patterns between weekdays and weekends?




## Figures

The figure sizes have been customised so that you can easily put two images side-by-side. 

```{r,  fig.cap="my caption"}
plot(1:10)

```


## More Examples

You can write math expressions, e.g. $Y = X\beta + \epsilon$, footnotes^[A footnote here.], and tables, e.g. using `knitr::kable()`.

```{r, echo=FALSE, results='asis'}
knitr::kable(head(mtcars, 10))
```

Also a quote using `>`:

> "He who gives up [code] safety for [code] speed deserves neither."
([via](https://twitter.com/hadleywickham/status/504368538874703872))
